
// static/js/script.js
document.addEventListener('DOMContentLoaded',()=>{const t=document.getElementById("transcriptForm"),e=document.getElementById("videoInput"),o=document.getElementById("submitButton"),n=document.getElementById("loadingIndicator"),i=document.getElementById("resultArea"),r=document.getElementById("transcriptResult"),s=document.getElementById("transcriptInfo"),a=document.getElementById("errorAlert"),l=document.getElementById("copyButton"),c="Obtener",d=`
        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        Obteniendo...`,p=`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard me-1" viewBox="0 0 16 16">
          <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
          <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
        </svg>
        Copiar`,u=`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg me-1" viewBox="0 0 16 16">
          <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425z"/>
        </svg>
        ¡Copiado!`;function m(t){a&&(a.textContent=t,a.style.display="block")}function g(){a&&(a.style.display="none",a.textContent="")}t&&t.addEventListener("submit",async function(t){t.preventDefault();const y=e.value.trim();if(!y)return void m("Por favor, ingresa una URL o ID de video.");g(),i.style.display="none",r.textContent="",s.textContent="",l.style.display="none",l.innerHTML=p,n.style.display="block",o.disabled=!0,o.innerHTML=d;try{const t=await fetch("/get_transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_id:y})}),e=await t.json();if(!t.ok)throw new Error(e.detail||`Error del servidor: ${t.status}`);r.textContent=e.transcript||"No se recibió texto de la transcripción.";let n=`Idioma: ${e.language} (${e.language_code})`;e.is_generated?n+=" (Generada automáticamente)":n+=" (Creada manualmente)",s.textContent=n,i.style.display="block",l.style.display="inline-block"}catch(t){console.error("Error en fetch:",t),m(t.message||"Ocurrió un error desconocido al contactar el servidor.")}finally{n.style.display="none",o.disabled=!1,o.innerHTML=c}}),l&&l.addEventListener("click",function(){const t=r.textContent;navigator.clipboard.writeText(t).then(()=>{this.innerHTML=u,this.disabled=!0,setTimeout(()=>{this.innerHTML=p,this.disabled=!1},1500)}).catch(t=>{console.error("Error al copiar al portapapeles: ",t),m("No se pudo copiar el texto al portapapeles.")})}),e&&e.addEventListener("click",function(){}),e&&e.addEventListener("focus",function(){this.value&&this.select()})});
